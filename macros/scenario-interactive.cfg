
#define HRS_SPAWN_UNIT SIDE TYPE X Y
    # Creates a generic unit of TYPE belonging to SIDE at X,Y, which has a
    # random name, gender and traits (just like a recruited unit).
    [unit]
        side={SIDE}
        type={TYPE}
        x={X}
        y={Y}
        generate_name=yes
        random_traits=yes
        random_gender=yes
        upkeep=full
		animate=yes
    [/unit]
#enddef

#define HRS_PETRIFIED_UNIT SIDE TYPE X Y
    # Creates a generic unit of TYPE belonging to SIDE at X,Y, which has a
    # random name, gender and traits (just like a recruited unit).
    [unit]
        side={SIDE}
        type={TYPE}
        x={X}
        y={Y}
        generate_name=yes
        random_traits=yes
        random_gender=yes
        upkeep=full
		animate=yes
    [/unit]
	[petrify]
		x,y={X},{Y}
	[/petrify]
	[modify_unit]
		[filter]
			x,y={X},{Y}
		[/filter]
		[effect]
			apply_to=image_mod
			replace="CS(12,25,25)"
		[/effect]
	[/modify_unit]
#enddef

#define HRS_IMPRISONED_UNIT X Y TYPE SIDE
	[item]
		x,y={X},{Y}
		halo=items/cage.png
	[/item]
	{GENERIC_UNIT {SIDE} {TYPE} {X} {Y}}
	[event]
		name=moveto
		first_time_only=yes
		[filter]
			[filter_location]
				x,y={X},{Y}
				radius=1
			[/filter_location]
			side=1
		[/filter]
		[modify_unit]
			[filter]
				x,y={X},{Y}
			[/filter]
			side=1
		[/modify_unit]
		[remove_item]
			x,y={X},{Y}
		[/remove_item]
	[/event]
#enddef

#define HRS_SPAWN_FROM_PORTAL SIDE X Y LIST EVENT_ID
	[event]
		id={EVENT_ID}
		name=side {SIDE} turn end
		first_time_only=no
		
		{RANDOM (1,2)}
		[if]
			[variable]
				name=random
				numerical_equals=1
			[/variable]
			[then]
				[scroll_to]
					x={X}
					y={Y}
				[/scroll_to]
				{RANDOM {LIST}}
				{HRS_SPAWN_UNIT {SIDE} $random {X} {Y} }
			[/then]
		[/if]
	[/event]
#enddef

#define HRS_TREMOR
    [sound]
        name=rumble.wav
    [/sound]
	
	[repeat]
		times=10
		[do]
			[scroll]
				x=5
				y=0
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=-10
				y=0
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=0
				y=5
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=0
				y=-10
			[/scroll]
			[scroll]
				x=5
				y=0
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=0
				y=5
			[/scroll]
			[delay]
				time=10
			[/delay]
		[/do]
	[/repeat]
#enddef

#define HRS_SMALL_TREMOR
    [sound]
        name=rumble.wav
    [/sound]
	
	[repeat]
		times=1
		[do]
			[scroll]
				x=2
				y=0
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=-3
				y=0
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=0
				y=1
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=0
				y=-4
			[/scroll]
			[scroll]
				x=2
				y=0
			[/scroll]
			[delay]
				time=10
			[/delay]
			[scroll]
				x=0
				y=2
			[/scroll]
			[delay]
				time=10
			[/delay]
		[/do]
	[/repeat]
#enddef

#define HRS_GIVE_GOLD AMOUNT
	[sound]
		name=data/core/sounds/gold.ogg
	[/sound]
	[object]
		name= _ "Gold"
		image=icons/coins_copper.png
		description= _ "You received " + {AMOUNT} +" gold!"
		duration=forever
		[filter]
			side=1
		[/filter]
	[/object]
	[gold]
		side=1
		amount={AMOUNT}
	[/gold]
#enddef

#define HRS_TREASURE X Y DO_WML
	[item]
        x,y={X},{Y}
        image=items/chest-plain-closed.png
    [/item]
	
	[event]
		name=moveto
		first_time_only=yes
		[filter]
			side=1
			x,y={X},{Y}
		[/filter]
		
		{DO_WML}
		
		[remove_item]
			x,y={X},{Y}
			image=items/chest-plain-closed.png
		[/remove_item]
		[item]
			x,y={X},{Y}
			image=items/chest-plain-open.png
		[/item]
		
		[select_unit]
			x,y={X},{Y}
		[/select_unit]
	[/event]
#enddef

#define HRS_WATCHER_REVEAL X Y SIDE
		{HRS_SPAWN_UNIT {SIDE} Watcher {X} {Y}}
		{HRS_ALWAYS_TALK {X} {Y} (
			[message]
				speaker=narrator
				image=units/dungeon/watcher.png
				message= _ "Not only the eyes can see . . ."
			[/message]
			[message]
				speaker=narrator
				image=units/dungeon/watcher.png
				message= _ ". . . come closer. Have . . . a look."
			[/message]
		
			[store_unit]
				[filter]
					type=Watcher
				[/filter]
				variable=hrs_eyes_watcher
			[/store_unit]
			[zoom]
				factor=2
			[/zoom]
			[foreach]
				array=hrs_eyes_watcher
				variable=i
				[do]
					[sound]
						name=huge-wail.ogg
					[/sound]
					[remove_shroud]
						x,y=$i.x,$i.y
						radius=2
						side=1
					[/remove_shroud]
					[lift_fog]
						x,y=$i.x,$i.y
						radius=2
						side=1
						multiturn=yes
					[/lift_fog]
					[redraw]
					[/redraw]
					[scroll_to]
						x,y=$i.x,$i.y 
						immediate=no
					[/scroll_to]
					[delay]
						time=2000
					[/delay]
					[redraw]
					[/redraw]
				[/do]
			[/foreach]
			[zoom]
				factor=1
			[/zoom]
		)}
#enddef

#define HRS_BORDER_STONE X Y MSG
	{PLACE_IMAGE scenery/rock-cairn.png {X} {Y}}
	[event]
		name=moveto
		first_time_only=yes
				
		[filter]
			side=1
			x,y={X},{Y}
		[/filter]
		
		[message]
			speaker=narrator
			image=scenery/rock-cairn.png
			message= {MSG}
		[/message]
	[/event]
#enddef

#define HRS_SIGN_POST X Y MSG
	{PLACE_IMAGE scenery/signpost.png {X} {Y}}
	[event]
		name=moveto
		first_time_only=yes
				
		[filter]
			side=1
			x,y={X},{Y}
		[/filter]
		
		[message]
			speaker=narrator
			image=portraits/signpost.png
			message= {MSG}
		[/message]
	[/event]
#enddef

#define HRS_SACRIFICAL_ALTAR X Y
		{PLACE_IMAGE items/altar-evil.png {X} {Y}}
		[item]
			x,y={X},{Y}
			halo=halo/magicsap-[10~1].png~BLEND(0,0,0,1)~SCALE(150,150)~O(40%):160
		[/item]
		[event]
			name=moveto
			first_time_only=no
			[filter]
				side=1
				x,y={X},{Y}
				[not]
					race=undead
				[/not]
			[/filter]
			
			[message]
				speaker=narrator
				image=items/altar-evil.png 
				message= _ "This is a a sacrifical altar. You can sacrifice your units here."
				[option]
					message="<span color='#ca3939'>Cast the blood ritual! (Your unit <b>dies</b> and cannot be brought back!</span>"
					image=attacks/rip.png
					[command]
						[if]
							[have_unit]
								id=Norn, Grim, Onarr, Skjol, Uthain
								x,y={X},{Y}
							[/have_unit]
							[then]
								[set_achievement]
									content_for=Cis
									id="cis1a"
								[/set_achievement]
							[/then]
							[else]
								[set_achievement]
									content_for=Cis
									id="cis1"
								[/set_achievement]
							[/else]
						[/if]
						[kill]
							x,y={X},{Y}
							animate=yes
							fire_event=yes
						[/kill]
						[sound]
							name=huge-wail.ogg
						[/sound]
						[delay]
							time=1000
						[/delay]
						{HRS_SMALL_TREMOR}
						{RANDOM "Skeleton,Skeleton,Skeleton,Skeleton Archer,Skeleton Archer,Skeleton Archer,Executioner,Undying,Ghost,Ghost,Ghost,Ghost,Ghost,Ghost,Ghost,Thrall,Thrall,Thrall,Thrall,Ghoul,Necrophage,Barrow Rider,Barrow Rider,Barrow Rider,Vampire Lady,Black Thrall,Skeleton Custodian,Skeleton Custodian,Skeleton Custodian,Skeleton Custodian,Skeleton Custodian,Flesh Golem,Death Squire,Shadow,Shadow,Wraith,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse,Walking Corpse"}
						{HRS_SPAWN_UNIT 1 $random {X} {Y} }
					[/command]
				[/option]		
				[option]
					message="Oh, I dont want anything!"
				[/option]
						
			[/message]
		[/event]
#enddef

#define HRS_TEMPLE X Y
		{PLACE_IMAGE scenery/temple1.png {X} {Y}}
		[item]
			x,y={X},{Y}
			halo=halo/magicsap-[10~1].png~BLEND(255,255,255,1)~SCALE(150,150)~O(40%):160
		[/item]
		[event]
			name=moveto
			first_time_only=no
			[filter]
				side=1
				x,y={X},{Y}
				[not]
					race=undead
				[/not]
			[/filter]
			
			[message]
				speaker=narrator
				image=items/altar-evil.png 
				message= _ "This is a a temple.."
				[option]
					message="<span color='#ffffff'>Enter the temple! (Your unit becomes invincible <b>for this turn</b>.</span>"
					image=attacks/lightbeam.png
					[command]
						[sound]
							name=huge-wail.ogg
						[/sound]
						[delay]
							time=1000
						[/delay]
						{HRS_SMALL_TREMOR}
						[object]
							 name="Invincible!"
							 image=attacks/lightbeam.png
							 description="This unit is invincible <b>for this turn</b>"
							 duration=turn
							 [effect]
								apply_to=status
								add=invulnerable
							[/effect]
							 [effect]
								apply_to=image_mod
								add="~BLEND(255,255,255,0.7)~BL(1)"
							[/effect]
						[/object]
						[modify_unit]
							[filter]
								x,y=$x1,$y1
							[/filter]
							moves=0
						[/modify_unit]
					[/command]
				[/option]		
				[option]
					message="Oh, I dont want anything!"
				[/option]
						
			[/message]
		[/event]
#enddef

#define HRS_SHRINE_OF_SHASSAGOTH X Y
	{SCROLL_TO {X} {Y}}
	[item]
		x,y={X},{Y}
		halo=scenery/shrine_of_shassagoth.png
	[/item]
	[terrain]
		[and]
			x,y,radius={X},{Y},1
		[/and]
		layer=overlay
		terrain="^Xo"
	[/terrain]
	
	[item]
		x,y={X},{Y}
		halo=halo/magicsap-[10~1].png~BLEND(0,0,0,1)~SCALE(300,300):160
	[/item]
#enddef

#define HRS_SARCOPHAGUS X Y SIDE
	{PLACE_IMAGE items/coffin-closed.png {X} {Y}}
	[event]
		name=moveto
		first_time_only=yes
		
		[filter]
			side=1
			x,y={X},{Y}
		[/filter]
		
		{SCROLL_TO {X} {Y}}
		
		[remove_item]
			x,y={X},{Y}
		[/remove_item]
		{PLACE_IMAGE items/coffin-open.png {X} {Y}}
		
		{GENERIC_UNIT {SIDE} (Vampire Lady) {X} {Y}}
		
		[sound]
			name=wail-long.wav
		[/sound]
	[/event]
#enddef

#define HRS_GRYPHON_NEST X Y SIDE ACHIEVE
	{PLACE_IMAGE scenery/nest-full.png {X} {Y}}
	[event]
		name=moveto
		first_time_only=yes
		
		[filter]
			side=1
			x,y={X},{Y}
		[/filter]
		
		{SCROLL_TO {X} {Y}}
		
		[remove_item]
			x,y={X},{Y}
		[/remove_item]
		{PLACE_IMAGE scenery/nest-empty.png {X} {Y}}
		
		{GENERIC_UNIT {SIDE} (Gryphon) {X} {Y}}
		
		[sound]
			name=gryphon-shriek-1.ogg
		[/sound]
		
		[set_sub_achievement]
			content_for=Cis
			sub_id={ACHIEVE}
			id=cis8
		[/set_sub_achievement]
		
	[/event]
#enddef

#define HRS_ACTIVATABLE_CLOCKWORK X Y TYPE SIDE

	{GENERIC_UNIT {SIDE} {TYPE} {X} {Y}}
	[petrify]
		x,y={X},{Y}
	[/petrify]
	[modify_unit]
		[filter]
			x,y={X},{Y}
		[/filter]
		[effect]
			apply_to=image_mod
			replace="CS(12,25,25)"
		[/effect]
	[/modify_unit]
	[event]
		name=moveto
		first_time_only=yes
		[filter]
			[filter_location]
				x,y={X},{Y}
				radius=1
			[/filter_location]
			side=1
		[/filter]
		[modify_unit]
			[filter]
				x,y={X},{Y}
			[/filter]
			side=1
		[/modify_unit]
		[item]
			x,y={X},{Y}
			halo=halo/empowered-[1~15].png~SCALE(100,100)~BLEND(60,196,70,0.6):80
		[/item]
		[delay]
			time=1000
		[/delay]
		[remove_item]
			x,y={X},{Y}
		[/remove_item]
		[unpetrify]
			x,y={X},{Y}
		[/unpetrify]
		{HRS_NARRATOR "Runic power begins to flow through this mysterious mechanical being. As it turns golden, it begins to breath, just as it was alive."}
		[if]
			[have_unit]
				type="Clockwork Triarius"
				x,y={X},{Y}
			[/have_unit]
			[then]
				[set_sub_achievement]
					content_for=Cis
					sub_id=cis5a
					id=cis5
				[/set_sub_achievement]
			[/then]
			[elseif]
				[have_unit]
					type="Clockwork Tesserarius"
					x,y={X},{Y}
				[/have_unit]
				[then]
					[set_sub_achievement]
						content_for=Cis
						sub_id=cis5b
						id=cis5
					[/set_sub_achievement]
				[/then]
			[/elseif]
			[elseif]
				[have_unit]
					type="Clockwork Centurion"
					x,y={X},{Y}
				[/have_unit]
				[then]
					[set_sub_achievement]
						content_for=Cis
						sub_id=cis5c
						id=cis5
					[/set_sub_achievement]
				[/then]
			[/elseif]
		[/if]
	[/event]
#enddef

#define HRS_SEEKER_AWAKENS X Y
	
	{SCROLL_TO {X} {Y}}
	{HRS_TREMOR}
	[unpetrify]
		x,y={X},{Y}
	[/unpetrify]
	[delay]
		time=800
	[/delay]
	{HRS_NARRATOR "A statue turned to life."}
	
#enddef

#define HRS_GREAT_SPHERE_SMALL X Y
	[item]
		x,y={X},{Y}
		halo=halo/light.png
	[/item]
	[item]
		x,y={X},{Y}
		halo=halo/relict-of-old-[1~36].png~SCALE(300,300):120
	[/item]
	[item]
		x,y={X},{Y}
		halo=halo/relict-flare.png~SCALE(650,650)
	[/item]
#enddef

#define HRS_BUILD_MENU
		[set_menu_item]
			id=hrs_build_fortress
			description="Builds a fortress (30g)"
			image=terrain/castle/dwarven-castle-tile.png~SCALE(32,32)
			[show_if]
				[have_unit]
					type=Dwarvish Miner2, Dwarvish Tunneler, Bardur
					x,y=$x1,$y1
				[/have_unit]
			[/show_if]
			
			[command]
				[store_gold]
					side=1
				[/store_gold]
				
				[if]
					[variable]
						name=gold
						greater_than_equal_to=30
					[/variable]
					[then]
						[terrain]
							x,y=$x1,$y1
							terrain=Cud
						[/terrain]
						
						[gold]
							side=1
							amount=-30
						[/gold]
						
						[sound]
							name=data/core/sounds/gold.ogg
						[/sound]
						[sound]
							name=staff.ogg
							repeat=2
						[/sound]
						{HRS_SMALL_TREMOR}
					[/then]
					[else]
						{HRS_NARRATOR "You need 30 gold!"}
					[/else]
				[/if]
			[/command]
		[/set_menu_item]
		

		[set_menu_item]
			id=hrs_build_castle
			description="Builds a dwarvish castle (40g)"
			image=terrain/castle/dwarven-keep-tile.png~SCALE(32,32)
			[show_if]
				[have_unit]
					type=Dwarvish Miner2, Dwarvish Tunneler, Bardur
					x,y=$x1,$y1
				[/have_unit]
			[/show_if]
			
			[command]
				[store_gold]
					side=1
				[/store_gold]
				
				[if]
					[variable]
						name=gold
						greater_than_equal_to=40
					[/variable]
					[then]
						[terrain]
							x,y=$x1,$y1
							terrain=Kud
						[/terrain]
						
						[gold]
							side=1
							amount=-40
						[/gold]
						
						[sound]
							name=data/core/sounds/gold.ogg
						[/sound]
						[sound]
							name=staff.ogg
							repeat=2
						[/sound]
						{HRS_SMALL_TREMOR}
					[/then]
					[else]
						{HRS_NARRATOR "You need 40 gold!"}
					[/else]
				[/if]
			[/command]
		[/set_menu_item]
		
		[set_menu_item]
			id=hrs_build_smith
			description="Builds a dwarvish smith (40g)"
			image=terrain/bellows.png~SCALE(32,32)
			[show_if]
				[have_unit]
					type=Dwarvish Miner2, Dwarvish Tunneler, Bardur
					x,y=$x1,$y1
				[/have_unit]
			[/show_if]
			
			[command]
				[store_gold]
					side=1
				[/store_gold]
				
				[if]
					[variable]
						name=gold
						greater_than_equal_to=40
					[/variable]
					[then]
						[terrain]
							x,y=$x1,$y1
							terrain=Uu^Vds
						[/terrain]
						
						[gold]
							side=1
							amount=-40
						[/gold]
						
						[sound]
							name=data/core/sounds/gold.ogg
						[/sound]
						[sound]
							name=staff.ogg
							repeat=2
						[/sound]
						{HRS_SMALL_TREMOR}
						{CAPTURE_VILLAGES 1 $x1 $y1 1}
					[/then]
					[else]
						{HRS_NARRATOR "You need 40 gold!"}
					[/else]
				[/if]
			[/command]
		[/set_menu_item]

		[set_menu_item]
			id=hrs_breakdown
			description="Destroys a nearby cave."
			image=terrain/cave/wall-rough-tile.png~SCALE(32,32)
			[show_if]
				[have_location]
					x,y=$x1,$y1
					[and]
						radius=1
						[filter]
							type=Dwarvish Miner2, Dwarvish Tunneler, Bardur
						[/filter]
					[/and]
				[/have_location]
				[and]
					[have_location]
						x,y=$x1,$y1
						terrain=Xu,Xuc,Xue,Xos,Xom,Xoi,Xoc,X*^*
					[/have_location]
				[/and]
			[/show_if]
			
			[command]			
				[terrain]
					x,y=$x1,$y1
					terrain=Uu^Es
				[/terrain]
				[sound]
					name=mace.ogg
					repeat=1
				[/sound]
				{HRS_SMALL_TREMOR}
			[/command]
		[/set_menu_item]

#enddef

#define HRS_INIT_DSMITH
	
		[event]
			name=moveto
			first_time_only=no
			[filter]
				side=1
				[filter_location]
					terrain=Uu^Vds
				[/filter_location]
			[/filter]

			
			[store_gold]
				side=1
			[/store_gold]
			
			[message]
				speaker=narrator
				image=terrain/bellows.png
				message= _ "This is a dwarven smith. You can infuse your weapon or armor 5 times with the following runes:"
						
				{HRS_SHOP_INFUSE_RUNE Val "Infuse <b>Val</b>" "Increases melee damage by +1" () "" "scenery/rune1-glow.png~SCALE(45,45)" 15 (
				[effect]
					apply_to=attack
					range=melee
					increase_damage=+1
				[/effect])}
				{HRS_SHOP_INFUSE_RUNE Lokh "Infuse <b>Lokh</b>" "Increases ranged damage by +1" () "" "scenery/rune2-glow.png~SCALE(45,45)" 15 (
				[effect]
					apply_to=attack
					range=ranged
					increase_damage=+1
				[/effect])}
				{HRS_SHOP_INFUSE_RUNE Dul "Infuse <b>Dul</b>" "Increases movement points by +1" () "" "scenery/rune3-glow.png~SCALE(45,45)" 25 (
				[effect]
					apply_to=movement
					increase=+1
				[/effect])}
				{HRS_SHOP_INFUSE_RUNE Naj "Infuse <b>Naj</b>" "Increases maximum hitpoints by +5" () "" "scenery/rune4-glow.png~SCALE(45,45)" 15 (
				[effect]
					apply_to=hitpoints
					increase_total=+5
					increase=+5
				[/effect])}
				{HRS_SHOP_INFUSE_RUNE Fel "Infuse <b>Fel</b>" "Increases accuracy by +2" () "" "scenery/rune5-glow.png~SCALE(45,45)" 15 (
				[effect]
					apply_to=attack
					increase_accuracy=+2
				[/effect])}
				[option]
					message="Oh, I dont want anything!"
				[/option]
						
			[/message]
		[/event]
#enddef

#define HRS_NARRATOR MSG
	[message]
		speaker=narrator
		image=wesnoth-icon.png
		message= {MSG}
	[/message]
#enddef

#define HRS_SHASSAGOTH MSG
	[message]
		speaker=narrator
		image=portraits/shassagoth.png
		message= {MSG}
	[/message]
#enddef

#define HRS_SPAWN_GROUP SIDE X Y LIST NUMBER
	{SCROLL_TO {X} {Y}}
	[repeat]
		times={NUMBER}
		[do]
			{RANDOM {LIST}}
			{HRS_SPAWN_UNIT {SIDE} $random {X} {Y} }
		[/do]
	[/repeat]
	[delay]
		time=1000
	[/delay]
#enddef

#define HRS_CREATE_QUEST_CHARACTER SIDE TYPE X Y ID_STRING NAME_STRING
	{NAMED_NOTRAIT_UNIT {SIDE} {TYPE} {X} {Y} {ID_STRING} {NAME_STRING}}

		[modify_unit]
			[filter]
				id={ID_STRING}
			[/filter]
			[status]
				invulnerable=yes
			[/status]
			[object]
				name= _ "quest-character-unmoveable-invincible"
				duration=forever
				silent=yes
				id=questimmortal
				[effect]
					apply_to=movement
					set=0
				[/effect]
				[effect]
					apply_to=overlay
					replace=misc/leader-expendable.png
				[/effect]
			[/object]
		[/modify_unit]
#enddef

#define HRS_TALK X Y DO_WML
	{SCROLL_TO {X} {Y}}
	
	[item]
		x,y={X},{Y}
		halo=misc/exclamation-1.png:140,misc/exclamation-2.png:140,misc/exclamation-1.png:140,misc/exclamation-3.png:140
	[/item]
	
	[delay]
		time=2000
	[/delay]
	
	[event]
		name=moveto
		first_time_only=yes
		
		[filter]
			[filter_location]
				[and]
					x,y={X},{Y}
					radius=1
				[/and]
			[/filter_location]
			[filter_side]
				[allied_with]
					side=1
				[/allied_with]
			[/filter_side]
		[/filter]
		
		[remove_item]
			x,y={X},{Y}
			halo=misc/exclamation-1.png:140,misc/exclamation-2.png:140,misc/exclamation-1.png:140,misc/exclamation-3.png:140
		[/remove_item]
		{DO_WML}
	[/event]
#enddef

#define HRS_ALWAYS_TALK X Y DO_WML
	{SCROLL_TO {X} {Y}}
	
	[item]
		x,y={X},{Y}
		halo=misc/exclamation-1.png:140,misc/exclamation-2.png:140,misc/exclamation-1.png:140,misc/exclamation-3.png:140
	[/item]
	
	[delay]
		time=2000
	[/delay]
	
	[event]
		name=moveto
		first_time_only=no
		
		[filter]
			[filter_location]
				[and]
					x,y={X},{Y}
					radius=1
				[/and]
			[/filter_location]
			[filter_side]
				[allied_with]
					side=1
				[/allied_with]
			[/filter_side]
		[/filter]

		{DO_WML}
	[/event]
#enddef

#define HRS_CREATE_HERO SIDE TYPE X Y ID_STRING NAME_STRING WML
	{NAMED_UNIT {SIDE} {TYPE} {X} {Y} {ID_STRING} {NAME_STRING} {WML}}
	{MAKE_HERO {ID_STRING}}	
#enddef

#define HRS_SIDE_NULL
        user_team_name= _ "teamname^Quest Guys"
		hidden=yes
		color=gold
		canrecruit=yes
		controller=null
		
		##:: Recruit List
		recruit=
		
		controller_lock=true
		team_lock=true
		color_lock=true
		gold_lock=true
		income_lock=true
		faction_lock=yes
		leader_lock=yes
		
		defeat_condition=always
		
		gold=0
		income=0
		village_gold=0
#enddef

#define HRS_SND_HEROES_ARRIVE
	{INCIDENTAL_MUSIC Trite_And_Wrong.ogg}
#enddef

#define HRS_SND_QUEST_DONE
	{INCIDENTAL_MUSIC Scurvy_Dogs_Yarr.ogg}
#enddef

#define HRS_SND_BAD_THINGS_HAPPEN
	{INCIDENTAL_MUSIC 4_The_Forging_of_Souls.ogg}
#enddef

#define HRS_OBJ_HEROES_DIE
	[objective]
		description= _ "A hero dies (Heroes are marked with a silver crown)"
		condition=lose
	[/objective]
#enddef

#define HRS_OBJ_NOTE NOTE
	[note]
		description={NOTE}
		red,green,blue=200,200,200
	[/note]
#enddef

#define HRS_FADE_TO_WHITE_HOLD TIME
    # Fades the screen to black and then pauses for TIME milliseconds.
    # Use {FADE_IN} to return to normal
    {FADE_STEP 32 5}
    {FADE_STEP 64 5}
    {FADE_STEP 96 5}
    {FADE_STEP 128 5}
    {FADE_STEP 160 5}
    {FADE_STEP 192 5}
    {FADE_STEP 224 5}
    {FADE_STEP 256 5}
    {FADE_STEP 512 {TIME}}
#enddef

#define MOVETO_ACHIEVEMENT X Y
	[event]
		name=moveto
		first_time_only=yes
		
		[filter]
			side=1
			x,y={X},{Y}
		[/filter]
		
		[set_variable]
			name=diggy
			add=+1
		[/set_variable]
		[if]
			[variable]
				name=diggy
				equals=4
			[/variable]
			[then]
				[set_achievement]
					content_for=Cis
					id="cis4"
				[/set_achievement]
			[/then]
		[/if]
	
	[/event]
#enddef